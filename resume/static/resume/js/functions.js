function highlight(a){highlighted=[],$(".hashtag").each(function(){$(this).text()=="#"+a?(hashtag=a,$(this).hasClass("highlight")?$(this).removeClass("highlight"):($(this).addClass("highlight"),highlighted.push($(this)))):$(this).hasClass("highlight")&&$(this).removeClass("highlight")}),$(document).delay(1e3).queue(bubbleHandler())}function tagsInViewport(){for(var a=getViewport(),b=0,c=0,d=0,e=highlighted.length-1;e>=0;e--){var f=highlighted[e].position().top;f>a.top&&f<a.bottom?c++:f<a.top?b++:f>a.bottom&&d++}return{above:b,below:d,inView:c}}function getViewport(){var a=$(window).height(),b=$(window).scrollTop();return{top:b,bottom:a+b}}function bubbleHandler(){var a=tagsInViewport();if(a.below>0){var b;b=a.below<2?"Scroll down for "+a.below+" more occurence of <b>#"+hashtag+"</b>":"Scroll down for "+a.below+" more occurences of <b>#"+hashtag+"</b>",b!=$(".bubble").html(b)&&($(".bubbleBelow").show(),$(".bubbleBelow").removeClass("bounceOut"),$(".bubbleBelow").addClass("bounceIn"),$(".bubble").html(b))}else $(".bubbleBelow").addClass("bounceOut")}var highlighted=[],hashtag;$(window).scroll(function(){bubbleHandler()}),$(document).ready(function(){location.hash&&highlight(location.hash.replace("#",""))});